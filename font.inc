;
; Start of code
;
;            *= $3000
;

cursor_x = $318
cursor_y = $319

set_cursor:
	stx cursor_x
	sty cursor_y

	stx $62		; Set screenaddress
	pha
	tya
	clc
	adc #$80
	sta $63
	pla
	rts

LFFEE:
	cmp #32		; Check control code
	bcs prt_chr
	rts
prt_chr:
	pha
	sta $60		; Calculate char data address
	tya
	pha
	txa
	pha

	lda #0
	sta $61

	asl $60
	rol $61
	asl $60
	rol $61
	asl $60
	rol $61

	clc
	lda $60
	adc #<(font-32*8)
	sta chr_ptr+1
	lda $61
	adc #>(font-32*8)
	sta chr_ptr+2

	ldx #7
chr_loop:
	ldy scrval,x
chr_ptr:
	lda font,x
	sta ($62),y
	dex
	bpl chr_loop	

	ldx cursor_x
	inx
	ldy cursor_y
	jsr set_cursor

	pla
	tax
	pla
	tay
	pla
	rts

font:
            .byte $00,$00,$00,$00,$00,$00,$00,$00
            .byte $18,$18,$18,$18,$18,$00,$18,$00
            .byte $6C,$6C,$6C,$00,$00,$00,$00,$00
            .byte $36,$36,$7F,$36,$7F,$36,$36,$00
            .byte $0C,$3F,$68,$3E,$0B,$7E,$18,$00
            .byte $60,$66,$0C,$18,$30,$66,$06,$00
            .byte $38,$6C,$6C,$38,$6D,$66,$3B,$00
            .byte $0C,$18,$30,$00,$00,$00,$00,$00
            .byte $0C,$18,$30,$30,$30,$18,$0C,$00
            .byte $30,$18,$0C,$0C,$0C,$18,$30,$00
            .byte $00,$18,$7E,$3C,$7E,$18,$00,$00
            .byte $00,$18,$18,$7E,$18,$18,$00,$00
            .byte $00,$00,$00,$00,$00,$18,$18,$30
            .byte $00,$00,$00,$7E,$00,$00,$00,$00
            .byte $00,$00,$00,$00,$00,$18,$18,$00
            .byte $00,$06,$0C,$18,$30,$60,$00,$00
            .byte $3C,$66,$6E,$7E,$76,$66,$3C,$00
            .byte $18,$38,$18,$18,$18,$18,$7E,$00
            .byte $3C,$66,$06,$0C,$18,$30,$7E,$00
            .byte $3C,$66,$06,$1C,$06,$66,$3C,$00
            .byte $0C,$1C,$3C,$6C,$7E,$0C,$0C,$00
            .byte $7E,$60,$7C,$06,$06,$66,$3C,$00
            .byte $1C,$30,$60,$7C,$66,$66,$3C,$00
            .byte $7E,$06,$0C,$18,$30,$30,$30,$00
            .byte $3C,$66,$66,$3C,$66,$66,$3C,$00
            .byte $3C,$66,$66,$3E,$06,$0C,$38,$00
            .byte $00,$00,$18,$18,$00,$18,$18,$00
            .byte $00,$00,$18,$18,$00,$18,$18,$30
            .byte $0C,$18,$30,$60,$30,$18,$0C,$00
            .byte $00,$00,$7E,$00,$7E,$00,$00,$00
            .byte $30,$18,$0C,$06,$0C,$18,$30,$00
            .byte $3C,$66,$0C,$18,$18,$00,$18,$00
            .byte $3C,$66,$6E,$6A,$6E,$60,$3C,$00
            .byte $3C,$66,$66,$7E,$66,$66,$66,$00
            .byte $7C,$66,$66,$7C,$66,$66,$7C,$00
            .byte $3C,$66,$60,$60,$60,$66,$3C,$00
            .byte $78,$6C,$66,$66,$66,$6C,$78,$00
            .byte $7E,$60,$60,$7C,$60,$60,$7E,$00
            .byte $7E,$60,$60,$7C,$60,$60,$60,$00
            .byte $3C,$66,$60,$6E,$66,$66,$3C,$00
            .byte $66,$66,$66,$7E,$66,$66,$66,$00
            .byte $7E,$18,$18,$18,$18,$18,$7E,$00
            .byte $3E,$0C,$0C,$0C,$0C,$6C,$38,$00
            .byte $66,$6C,$78,$70,$78,$6C,$66,$00
            .byte $60,$60,$60,$60,$60,$60,$7E,$00
            .byte $63,$77,$7F,$6B,$6B,$63,$63,$00
            .byte $66,$66,$76,$7E,$6E,$66,$66,$00
            .byte $3C,$66,$66,$66,$66,$66,$3C,$00
            .byte $7C,$66,$66,$7C,$60,$60,$60,$00
            .byte $3C,$66,$66,$66,$6A,$6C,$36,$00
            .byte $7C,$66,$66,$7C,$6C,$66,$66,$00
            .byte $3C,$66,$60,$3C,$06,$66,$3C,$00
            .byte $7E,$18,$18,$18,$18,$18,$18,$00
            .byte $66,$66,$66,$66,$66,$66,$3C,$00
            .byte $66,$66,$66,$66,$66,$3C,$18,$00
            .byte $63,$63,$6B,$6B,$7F,$77,$63,$00
            .byte $66,$66,$3C,$18,$3C,$66,$66,$00
            .byte $66,$66,$66,$3C,$18,$18,$18,$00
            .byte $7E,$06,$0C,$18,$30,$60,$7E,$00
            .byte $7C,$60,$60,$60,$60,$60,$7C,$00
            .byte $00,$60,$30,$18,$0C,$06,$00,$00
            .byte $3E,$06,$06,$06,$06,$06,$3E,$00
            .byte $18,$3C,$66,$42,$00,$00,$00,$00
            .byte $00,$00,$00,$00,$00,$00,$00,$FF
            .byte $1C,$36,$30,$7C,$30,$30,$7E,$00
            .byte $00,$00,$3C,$06,$3E,$66,$3E,$00
            .byte $60,$60,$7C,$66,$66,$66,$7C,$00
            .byte $00,$00,$3C,$66,$60,$66,$3C,$00
            .byte $06,$06,$3E,$66,$66,$66,$3E,$00
            .byte $00,$00,$3C,$66,$7E,$60,$3C,$00
            .byte $1C,$30,$30,$7C,$30,$30,$30,$00
            .byte $00,$00,$3E,$66,$66,$3E,$06,$3C
            .byte $60,$60,$7C,$66,$66,$66,$66,$00
            .byte $18,$00,$38,$18,$18,$18,$3C,$00
            .byte $18,$00,$38,$18,$18,$18,$18,$70
            .byte $60,$60,$66,$6C,$78,$6C,$66,$00
            .byte $38,$18,$18,$18,$18,$18,$3C,$00
            .byte $00,$00,$36,$7F,$6B,$6B,$63,$00
            .byte $00,$00,$7C,$66,$66,$66,$66,$00
            .byte $00,$00,$3C,$66,$66,$66,$3C,$00
            .byte $00,$00,$7C,$66,$66,$7C,$60,$60
            .byte $00,$00,$3E,$66,$66,$3E,$06,$07
            .byte $00,$00,$6C,$76,$60,$60,$60,$00
            .byte $00,$00,$3E,$60,$3C,$06,$7C,$00
            .byte $30,$30,$7C,$30,$30,$30,$1C,$00
            .byte $00,$00,$66,$66,$66,$66,$3E,$00
            .byte $00,$00,$66,$66,$66,$3C,$18,$00
            .byte $00,$00,$63,$6B,$6B,$7F,$36,$00
            .byte $00,$00,$66,$3C,$18,$3C,$66,$00
            .byte $00,$00,$66,$66,$66,$3E,$06,$3C
            .byte $00,$00,$7E,$0C,$18,$30,$7E,$00
            .byte $0C,$18,$18,$70,$18,$18,$0C,$00
            .byte $18,$18,$18,$00,$18,$18,$18,$00
            .byte $30,$18,$18,$0E,$18,$18,$30,$00
            .byte $31,$6B,$46,$00,$00,$00,$00,$00
            .byte $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
